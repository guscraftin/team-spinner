:root {
  --bg: #0f1220;
  --panel: #1e2336;
  --panel-alt: #262d45;
  --text: #f5f7fb;
  --accent: #ff9f1c;
  --accent-alt: #ffbf69;
  --danger: #ff3864;
  --success: #2ec4b6;
  --gradient: linear-gradient(135deg,#5b2be0,#8f44fd 60%,#c76bff);
  --radius: 14px;
  --trans: 160ms cubic-bezier(.4,.2,.2,1);
  font-family: 'Segoe UI', system-ui, Avenir, Helvetica, Arial, sans-serif;
}

* { box-sizing: border-box; }
html,body { height:100%; }
body {
  margin:0;
  background: radial-gradient(circle at 20% 20%, #1c2240, #0b0e19 70%);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
}

header { text-align:center; padding: clamp(1.5rem,2vw,2.5rem) 1rem 1rem; }
header h1 { margin:0; font-size: clamp(1.9rem,4vw,3rem); background:var(--gradient); -webkit-background-clip:text; background-clip:text; color:transparent; }
.subtitle { margin:.2rem 0 0; opacity:.8; letter-spacing:.5px; }

main { max-width: 1180px; margin:0 auto; padding: 0 1.2rem 4rem; }

.roles-container { display:grid; gap:1.1rem; grid-template-columns: repeat(auto-fit,minmax(230px,1fr)); margin-bottom:2.5rem; }
.role-card {
  position:relative;
  background: var(--panel);
  border-radius: var(--radius);
  padding: 1rem 1.1rem 1.2rem;
  display:flex; flex-direction:column; gap:.65rem;
  box-shadow: 0 4px 14px -4px rgba(0,0,0,.5), 0 2px 0 0 #ffffff08 inset;
  border:1px solid #ffffff12;
  overflow:hidden;
  isolation:isolate;
}
.role-card:before { content:""; position:absolute; inset:0; background:linear-gradient(145deg,#ffffff08,#ffffff02); mix-blend-mode:overlay; pointer-events:none; }
.role-card h3 { margin:0; font-size:1.05rem; letter-spacing:.5px; display:flex; align-items:center; gap:.4ch; font-weight:600; }
.role-pill { font-size:.65rem; text-transform:uppercase; letter-spacing:1px; background:#ffffff10; padding:.25rem .55rem; border-radius: 999px; font-weight:600; }
.role-name { font-size:1.35rem; font-weight:700; min-height:2.1rem; background:var(--panel-alt); padding:.55rem .7rem; border-radius:10px; display:flex; align-items:center; justify-content:center; box-shadow: inset 0 0 0 1px #ffffff10; }
.role-name.spin { animation: pop .55s var(--trans); }

@keyframes pop { 0% { transform:scale(.6) rotate(-4deg); opacity:0; } 60% { transform:scale(1.08); opacity:1;} 100% { transform:scale(1); } }

.exclusions-panel { background: var(--panel); padding:1.3rem 1.2rem 1.6rem; border-radius: var(--radius); box-shadow: 0 8px 26px -10px #000a, 0 0 0 1px #ffffff10 inset; margin-bottom:2.5rem; }
.exclusions-panel h2 { margin:0 0 .6rem; font-size:1.15rem; }
.hint { margin:0 0 1rem; font-size:.8rem; opacity:.7; }

.exclusions-grid { display:grid; gap:.9rem; grid-template-columns: repeat(auto-fit,minmax(210px,1fr)); }
.ex-block { background: var(--panel-alt); border-radius:12px; padding:.75rem .8rem 1rem; box-shadow: inset 0 0 0 1px #ffffff10, 0 4px 10px -6px #000; display:flex; flex-direction:column; gap:.55rem; }
.ex-block h4 { margin:0; font-size:.85rem; letter-spacing:.5px; text-transform:uppercase; opacity:.85; display:flex; justify-content:space-between; }
.member-list { list-style:none; margin:0; padding:0; display:grid; gap:.35rem; }
.member-list li { position:relative; }
.member-list input { position:absolute; opacity:0; }
.member-list label { display:flex; align-items:center; gap:.5rem; font-size:.76rem; cursor:pointer; background:#ffffff06; padding:.4rem .55rem; border-radius:7px; transition:var(--trans); letter-spacing:.2px; }
.member-list input:focus-visible + label { outline:2px solid var(--accent); outline-offset:2px; }
.member-list input:checked + label { background: var(--accent); color:#1e1e1e; font-weight:600; box-shadow:0 0 0 1px #0005 inset; }
.member-list input:not(:checked):hover + label { background:#ffffff10; }

.ex-actions { margin-top:1rem; display:flex; justify-content:flex-end; }
.btn-secondary { background:#ffffff12; color:var(--text); border:1px solid #ffffff18; font:inherit; padding:.55rem .9rem; border-radius:8px; cursor:pointer; transition:var(--trans); }
.btn-secondary:hover { background:#ffffff20; }
.btn-secondary:active { transform:translateY(1px); }

.actions { text-align:center; display:flex; flex-direction:column; gap:1rem; }
.draw-btn { --btn-bg: var(--gradient); background: var(--btn-bg); color:#fff; font:inherit; font-weight:600; letter-spacing:.5px; padding: .95rem 1.6rem; border:none; border-radius: 50px; cursor:pointer; box-shadow:0 6px 20px -6px #5312c2, 0 2px 0 0 #ffffff30 inset; position:relative; overflow:hidden; }
.draw-btn:before { content:""; position:absolute; inset:0; background:linear-gradient(120deg,#ffffff15,transparent 60%); mix-blend-mode:overlay; }
.draw-btn:hover { transform:translateY(-2px); box-shadow:0 10px 26px -6px #5312c2, 0 2px 0 0 #ffffff30 inset; }
.draw-btn:active { transform:translateY(0); }
.draw-btn:disabled { opacity:.4; cursor:not-allowed; }

.message { min-height:1.2rem; font-size:.85rem; opacity:.85; }
.message.error { color: var(--danger); }
.message.success { color: var(--success); }

footer { text-align:center; padding:2rem 0 3rem; font-size:.65rem; opacity:.6; }

/* Scrollbar minimal */
::-webkit-scrollbar { width:10px; }
::-webkit-scrollbar-track { background:#0c101c; }
::-webkit-scrollbar-thumb { background:#2b3147; border-radius:50px; }
::-webkit-scrollbar-thumb:hover { background:#39415a; }

.settings-row { display:flex; flex-direction:column; align-items:center; gap:.4rem; margin-bottom:.4rem; }
.settings-row label { font-size:.75rem; letter-spacing:.5px; opacity:.8; }
#animDuration { width: min(360px,100%); accent-color: var(--accent); }

/* Placeholder roll animation */
.role-name.rolling { position:relative; overflow:hidden; padding:0; display:flex; flex-direction:column; justify-content:center; gap:0; background:var(--panel-alt); }
.role-roller { position:relative; height:2.7rem; display:flex; flex-direction:column; align-items:stretch; justify-content:center; overflow:hidden; }
.role-roller-line { display:flex; flex-direction:column; transition: transform 160ms ease-out; }
.role-slot { height:.9rem; display:flex; align-items:center; justify-content:center; font-size:.7rem; opacity:.5; }
.role-slot.current { font-size:1.05rem; font-weight:700; opacity:1; height:1.3rem; }
.role-slot.next, .role-slot.prev { font-size:.75rem; }
.role-name.rolling:before { background:none; animation:none; }

#confettiLayer { position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:999; }
.confetti-piece { position:absolute; width:10px; height:14px; top:-20px; opacity:0; animation: fall linear forwards; will-change: transform; }
@keyframes fall { to { transform: translateY(110vh) rotate(var(--rotEnd)); opacity:1; } }
